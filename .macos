#######################################################################
# Foreword / Warning                                                  #
#######################################################################

# This file is intended to set up some defaults for macOS that I change
# every time I set up a new computer or freshly install the OS. All the
# settings here are my personal preferences and not intended to be a
# set of optimal standards or the best default settings. I take a more
# minimal approach to my setups and prefer not to gut the entire OS
# like a lot of dotfiles do.

# Use at your own risk! Change or remove lines that you don't like!

#######################################################################
# Initialization                                                      #
#######################################################################

# Close any open System Preferences panes, to prevent them from overriding
# settings we’re about to change
osascript -e 'tell application "System Preferences" to quit';

# Ask for the administrator password upfront
sudo -v;

# Keep-alive: update existing `sudo` time stamp until `.osx` has finished
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

#######################################################################
# System Preferences: General                                         #
#######################################################################

# Use dark menu bar and Dock
osascript -e 'tell application "System Events" to tell appearance preferences to set properties to {dark mode: true}';

# Sidebar icon size: `Medium`
defaults write NSGlobalDomain NSTableViewDefaultSizeMode -int 2;

# Recent items: `None` Documents, Apps, and Servers

#######################################################################
# System Preferences: Desktop & Screen Saver                          #
#######################################################################

# Desktop #############################################################

# Set a new wallpaper.

# Screen Saver ########################################################

# Start after: `Never`

# Show with clock

#######################################################################
# System Preferences: Dock                                            #
#######################################################################

# Size:
defaults write com.apple.dock tilesize -int 64;

# Magnification:
defaults write com.apple.dock magnification -bool false;
defaults write com.apple.dock largesize -int 64;

# Minimize windows using: `Scale effect`
defaults write com.apple.dock mineffect -string "scale";

# Minimize windows into application icon
defaults write com.apple.dock minimize-to-application -bool true;

# Animate opening applications
defaults write com.apple.dock launchanim -bool false;

# Automatically hide and show the Dock
defaults write com.apple.dock autohide -bool true;

# Show indicators for open applications
defaults write com.apple.dock show-process-indicators -bool true;

#######################################################################

# Remove the auto-hide delay.
defaults write com.apple.dock autohide-delay -float 0;

# Remove the animation from auto-hide.
defaults write com.apple.dock autohide-time-modifier -float 0;

# Remove all the default App icons from the Dock
defaults write com.apple.dock persistent-apps -array;

#######################################################################
# System Preferences: Mission Control                                 #
#######################################################################

# Dashboard: `Off`
defaults write com.apple.dashboard mcx-disabled -bool true

#######################################################################
# System Preferences: Security & Privacy                              #
#######################################################################

# General #############################################################

# Require password `immediately` after sleep or screen saver begins.
defaults write com.apple.screensaver askForPassword -int 1;
defaults write com.apple.screensaver askForPasswordDelay -int 0;

# Firewall ############################################################

# Firewall: `On`
sudo defaults write /Library/Preferences/com.apple.alf globalstate -int 1;

# Enable stealth mode
sudo defaults write /Library/Preferences/com.apple.alf stealthenabled -int 1;

# Privacy #############################################################

#######################################################################
# System Preferences: Energy Saver                                    #
#######################################################################

# Computer sleep:

# Display sleep:

# Put hard disks to sleep when possible

# Wake for network access

# Start up automatically after a power failure

#######################################################################
# System Preferences: Keyboard                                        #
#######################################################################

#  Key Repeat
defaults write -g KeyRepeat -int 2

# Delay Until Repeat
defaults write -g InitialKeyRepeat -int 15

#######################################################################

# Stop iTunes from responding to the keyboard media keys
launchctl unload -w /System/Library/LaunchAgents/com.apple.rcd.plist 2> /dev/null

#######################################################################
# System Preferences: Sharing                                         #
#######################################################################

# Set computer name (as done via System Preferences → Sharing)
sudo scutil --set ComputerName "0x536f6d627261";
sudo scutil --set HostName "0x536f6d627261";
sudo scutil --set LocalHostName "0x536f6d627261";
sudo defaults write /Library/Preferences/SystemConfiguration/com.apple.smb.server NetBIOSName -string "0x536f6d627261";

#######################################################################
# System Preferences: Users & Groups                                  #
#######################################################################

# Display login window as: `Name and password`
sudo defaults write /Library/Preferences/com.apple.loginwindow SHOWFULLNAME -bool true;

# Show the Sleep, Restart, and Shut Down buttons
sudo defaults write /Library/Preferences/com.apple.loginwindow PowerOffDisabled -bool true;

# Show password hints
sudo defaults write /Library/Preferences/com.apple.loginwindow RetriesUntilHint -int 0;

# Allow guests to log in to this computer
sudo defaults write /Library/Preferences/com.apple.loginwindow GuestEnabled -bool false;

#######################################################################
# System Preferences: Siri                                            #
#######################################################################

# Enable ask Siri

# Show Siri in menu bar

#######################################################################
# System Preferences: Date & Time                                     #
#######################################################################

#######################################################################
# Finder                                                              #
#######################################################################

# General #############################################################

# Show these items on the desktop: Hard disks; External disks; CDs,
# DVDs, and iPods; Connected servers
defaults write com.apple.finder ShowHardDrivesOnDesktop -bool false;
defaults write com.apple.finder ShowExternalHardDrivesOnDesktop -bool false;
defaults write com.apple.finder ShowRemovableMediaOnDesktop -bool false;
defaults write com.apple.finder ShowMountedServersOnDesktop -bool false;

# New Finder windows show: `$HOME`
defaults write com.apple.finder NewWindowTarget -string "PfHm";

# Advanced ############################################################

# Show all filename extensions
defaults write NSGlobalDomain AppleShowAllExtensions -bool false

# Show warning before changing an extension
defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false

# Show warning before emptying the Trash
defaults write com.apple.finder WarnOnEmptyTrash -bool false

# When performing a search: `Search the Current Folder`
defaults write com.apple.finder FXDefaultSearchScope -string "SCcf"

# View Options ########################################################

# Always open in icon view
defaults write com.apple.finder FXPreferredViewStyle -string "icnv"

# Arrange by: `Name`
/usr/libexec/PlistBuddy -c "Set :DesktopViewSettings:IconViewSettings:arrangeBy name" ~/Library/Preferences/com.apple.finder.plist
/usr/libexec/PlistBuddy -c "Set :FK_StandardViewSettings:IconViewSettings:arrangeBy name" ~/Library/Preferences/com.apple.finder.plist
/usr/libexec/PlistBuddy -c "Set :StandardViewSettings:IconViewSettings:arrangeBy name" ~/Library/Preferences/com.apple.finder.plist

# Icon size: 64 x 64
/usr/libexec/PlistBuddy -c "Set :DesktopViewSettings:IconViewSettings:iconSize 64" ~/Library/Preferences/com.apple.finder.plist
/usr/libexec/PlistBuddy -c "Set :FK_StandardViewSettings:IconViewSettings:iconSize 64" ~/Library/Preferences/com.apple.finder.plist
/usr/libexec/PlistBuddy -c "Set :StandardViewSettings:IconViewSettings:iconSize 64" ~/Library/Preferences/com.apple.finder.plist

# Grid spacing:
/usr/libexec/PlistBuddy -c "Set :DesktopViewSettings:IconViewSettings:gridSpacing 64" ~/Library/Preferences/com.apple.finder.plist
/usr/libexec/PlistBuddy -c "Set :FK_StandardViewSettings:IconViewSettings:gridSpacing 64" ~/Library/Preferences/com.apple.finder.plist
/usr/libexec/PlistBuddy -c "Set :StandardViewSettings:IconViewSettings:gridSpacing 64" ~/Library/Preferences/com.apple.finder.plist

#######################################################################

# Finder: disable window animations and Get Info animations
defaults write com.apple.finder DisableAllAnimations -bool true
